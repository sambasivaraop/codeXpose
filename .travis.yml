dist: trusty

language: python
python: '3.5'
sudo: enabled

services:
  - mysql

addons:
  apt:
    packages:
      - mysql-server-5.6
      - mysql-client-core-5.6
      - mysql-client-5.6
before_script:
  - mysql -u root -e "CREATE USER 'dev'@'localhost' IDENTIFIED BY 'abc@1234';"
  - mysql -u root -e "GRANT ALL PRIVILEGES ON *.* TO 'dev'@'localhost';"

script:
  - cd backend/codexpose/
  - pip install -r requirements.txt
  - pylint --rcfile=../../.pylintrc codexpose
  - pycodestyle codexpose/
  - pylint --rcfile=../../.pylintrc interview/
  - pycodestyle interview/
  - touch codexpose.log
  - python manage.py test
#  - nosetests -v --with-coverage --cover-tests --cover-package=interview interview/tests/test*.py

after_success:
  - coveralls

notifications:
  slack: codexpose:Lk1VuZodnuuDanuPfGBbI86y
